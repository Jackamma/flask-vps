{% extends 'base.html' %}

{% block head %}
<title>Pilota's ippodromo</title>
<script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript">
    var isDataValid = '{{ isDataValid }}';
    var isDataExpired = '{{ isDataExpired }}';
</script>
<script src="{{ url_for('static', filename='js/ippo.js') }}"></script>
<style>
    .raceLine{
        position: relative;
        height: 5px;
        width: 100%;
        background-color: white;
    }

    .horse{
        position: relative;
        /* margin-right: 99%; */
        /* margin-left: 0%; */
        /* padding-left: 0%; */
        left:-40%;
        height: 50px;
        width: auto;
        /* margin-top: 10px; */
    }

    .names{
        position: absolute;
        /* left: -40%; */
        font-size: 1.5em;
        /* top: 10px; */
        text-align: center;
        margin-left: 30%;
        font-weight: bold;
        margin-top: 10px;
    }
</style>
{% endblock %}

{% block nav_btn %}
<a class="nav-link" href="/">Home</a>
{% endblock %}

{% block body %}
<main class="container px-3" style="margin-top: 50px;">
    <h1>Benvenuto nell'ippodromo</h1>
    {% if not isDataValid %}
        <p class="lead">Esegui il login da Telegram :)</p>
        {% if isDataExpired %}
            <p><i>I dati trasmessi da Telegram sono troppo vecchi :(</i></p>
        {% endif %}
        <div style="text-align: center; margin-top: 20px;">
            <!-- <script async src="https://telegram.org/js/telegram-widget.js?14" data-telegram-login="PrivateTestBot" data-size="large" data-auth-url="/ippodromo" data-request-access="write"></script> -->
            <script async src="https://telegram.org/js/telegram-widget.js?14" data-telegram-login="PrivateTestBot" data-size="large" data-auth-url="http://vps617912.ovh.net/ippodromo" data-request-access="write"></script>
        </div>
    {% else %}
        <p class="lead">Ciao {{ first_name }}, pronto a giocare?</p>
        <p><b>Giocatori online: <span id="nPlayers"></span></b></p>
        <ul id="players" style="list-style-type: none; padding-left: 0px;"></ul>
        <input class="btn btn-primary" type="button" value="START" id="startIppo" hidden>

        <div hidden id="raceBg" style="position: relative; display:block; background-color: #00701e; border-radius: 25px; width: 100%; height: 313px; margin-left: auto; margin-right: auto; margin-top: 30px; margin-bottom: 30px;">
            <div style="position: absolute; width: 3px; height: 313px; background-color: white; left: 92%;"></div>
            <div style="position: absolute; width: 100%;">
                <div class="raceLine" style="margin-top: 25px;"></div>
                <p class="names">CUORE</p>
                <img src="{{ url_for('static', filename='horse.gif') }}" id="horse1" class="horse"/>
                <div class="raceLine" style="margin-top: 10px;"></div>
                <p class="names">QUADRO</p>
                <img src="{{ url_for('static', filename='horse.gif') }}" id="horse2" class="horse"/>
                <div class="raceLine" style="margin-top: 10px;"></div>
                <p class="names">FIORE</p>
                <img src="{{ url_for('static', filename='horse.gif') }}" id="horse3" class="horse"/>
                <div class="raceLine" style="margin-top: 10px;"></div>
                <p class="names">PICCHE</p>
                <img src="{{ url_for('static', filename='horse.gif') }}" id="horse4" class="horse"/>
                <div class="raceLine" style="margin-top: 10px;"></div>
            </div>
        </div>

        <p class="results" hidden>ðŸ¥‡ - <span id="first"></span></p>
        <p class="results" hidden>ðŸ¥ˆ - <span id="second"></span></p>
        <p class="results" hidden>ðŸ¥‰ - <span id="third"></span></p>
        <p class="results" hidden>ðŸ¥Š - <span id="fourth"></span></p>
        <!-- <img src="{{ url_for('static', filename='horse.gif') }}"/> -->
    {% endif %}
</main>

{% endblock %}
